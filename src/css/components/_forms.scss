/* Forms - Estilos para formulários e campos de entrada */

// Grupo de formulário
.form-group {
    margin-bottom: spacing(3);

    &:last-child {
        margin-bottom: 0;
    }
}

// Labels
.form-label,
label {
    display: block;
    margin-bottom: spacing(2);
    font-weight: $font-weight-medium;
    color: $text-dark;
    font-size: rem(16);
}

// Labels required
.form-label.required,
label.required {
    &::after {
        content: '*';
        margin-left: spacing(1);
        color: #dc3545;
    }
}

// Campos de texto e textarea
.form-control {
    display: block;
    width: 100%;
    padding: spacing(2) spacing(3);
    font-size: rem(16);
    line-height: 1.5;
    color: $text-dark;
    background-color: white;
    background-clip: padding-box;
    border: 1px solid $gray-400;
    border-radius: $border-radius;
    transition: $transition-base;

    &:focus {
        border-color: $accent-color;
        outline: 0;
        box-shadow: 0 0 0 0.2rem rgba($accent-color, 0.25);
    }

    &::placeholder {
        color: $gray-500;
        opacity: 1;
    }

    &:disabled,
    &[readonly] {
        background-color: $gray-200;
        opacity: 1;
    }

    &.is-invalid {
        border-color: #dc3545;

        &:focus {
            box-shadow: 0 0 0 0.2rem rgba(#dc3545, 0.25);
        }
    }

    &.is-valid {
        border-color: #28a745;

        &:focus {
            box-shadow: 0 0 0 0.2rem rgba(#28a745, 0.25);
        }
    }
}

// Textarea
textarea.form-control {
    min-height: 100px;
    resize: vertical;
}

// Select
select.form-control {
    padding-right: spacing(7);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23495057' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right spacing(2) center;
    background-size: 16px;
    appearance: none;

    &:focus {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23ffd95a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    }

    &::-ms-expand {
        display: none;
    }

    option {
        color: $text-dark;
    }
}

// Inputs de tamanho pequeno
.form-control-sm {
    padding: spacing(1) spacing(2);
    font-size: rem(14);
    border-radius: $border-radius-sm;
}

// Inputs de tamanho grande
.form-control-lg {
    padding: spacing(3) spacing(4);
    font-size: rem(18);
    border-radius: $border-radius-lg;
}

// Checkbox e Radio
.form-check {
    position: relative;
    display: block;
    padding-left: spacing(5);
    margin-bottom: spacing(2);

    &:last-child {
        margin-bottom: 0;
    }
}

.form-check-input {
    position: absolute;
    margin-top: 0.25rem;
    margin-left: -1.5rem;

    &[type='checkbox'] {
        appearance: none;
        width: 18px;
        height: 18px;
        background-color: white;
        border: 1px solid $gray-400;
        border-radius: 3px;
        margin-top: 0.2em;
        transition: $transition-base;

        &:checked {
            background-color: $primary-color;
            border-color: $primary-color;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='8' viewBox='0 0 10 8' fill='none'%3E%3Cpath d='M9 1L3.5 6.5L1 4' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-position: center;
            background-repeat: no-repeat;
        }

        &:focus {
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba($primary-color, 0.25);
        }
    }

    &[type='radio'] {
        appearance: none;
        width: 18px;
        height: 18px;
        background-color: white;
        border: 1px solid $gray-400;
        border-radius: 50%;
        margin-top: 0.2em;
        transition: $transition-base;

        &:checked {
            border-color: $primary-color;
            border-width: 5px;
        }

        &:focus {
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba($primary-color, 0.25);
        }
    }
}

.form-check-label {
    margin-bottom: 0;
    margin-left: spacing(1);
}

// Feedback de validação
.form-text {
    display: block;
    margin-top: spacing(1);
    font-size: rem(14);
    color: $gray-600;
}

.invalid-feedback {
    display: none;
    width: 100%;
    margin-top: spacing(1);
    font-size: rem(14);
    color: #dc3545;
}

.valid-feedback {
    display: none;
    width: 100%;
    margin-top: spacing(1);
    font-size: rem(14);
    color: #28a745;
}

.was-validated .form-control:invalid,
.form-control.is-invalid {
    border-color: #dc3545;

    &:focus {
        border-color: #dc3545;
        box-shadow: 0 0 0 0.2rem rgba(#dc3545, 0.25);
    }

    & ~ .invalid-feedback {
        display: block;
    }
}

.was-validated .form-control:valid,
.form-control.is-valid {
    border-color: #28a745;

    &:focus {
        border-color: #28a745;
        box-shadow: 0 0 0 0.2rem rgba(#28a745, 0.25);
    }

    & ~ .valid-feedback {
        display: block;
    }
}

// Input com ícone
.input-with-icon {
    position: relative;

    .lexicon-icon {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        left: spacing(3);
        width: 16px;
        height: 16px;
        color: $gray-500;
        pointer-events: none;
    }

    .form-control {
        padding-left: spacing(7);
    }
}

// Labels flutuantes quando focado ou preenchido
.form-floating {
    position: relative;

    > .form-control {
        height: 58px;
        padding: spacing(4) spacing(3) spacing(2);

        &::placeholder {
            color: transparent;
        }

        &:not(:placeholder-shown) ~ label,
        &:focus ~ label {
            opacity: 0.65;
            transform: scale(0.85) translateY(-0.5rem) translateX(0.15rem);
        }
    }

    > label {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        padding: spacing(4) spacing(3);
        pointer-events: none;
        border: 1px solid transparent;
        transform-origin: 0 0;
        transition: opacity 0.1s ease-in-out, transform 0.1s ease-in-out;
    }
}

// Botões de formulário
.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: spacing(3);
    margin-top: spacing(4);

    @include respond-to(mobile) {
        flex-direction: column;

        .btn {
            width: 100%;
        }
    }
}

// Formulário horizontal
.form-horizontal {
    .form-group {
        display: flex;
        flex-wrap: wrap;

        .form-label {
            flex: 0 0 25%;
            max-width: 25%;
            padding-right: spacing(3);
            padding-top: spacing(2);
        }

        .form-control-container {
            flex: 0 0 75%;
            max-width: 75%;
        }

        @include respond-to(mobile) {
            .form-label,
            .form-control-container {
                flex: 0 0 100%;
                max-width: 100%;
            }

            .form-label {
                padding-right: 0;
                padding-top: 0;
                margin-bottom: spacing(1);
            }
        }
    }
}

// Formulário de busca
.search-form {
    display: flex;

    .form-control {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }

    .btn {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
    }
}

// Formulário de contato
.contact-form {
    background-color: white;
    padding: spacing(5);
    border-radius: $border-radius-lg;
    @include box-shadow($box-shadow);

    @include respond-to(mobile) {
        padding: spacing(4);
    }
}

// Formulário do newsletter
.newsletter-form {
    display: flex;

    .form-control {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        border-right: 0;
    }

    .btn {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
    }

    @include respond-to(mobile) {
        flex-direction: column;

        .form-control {
            border-radius: $border-radius;
            border-right: 1px solid $gray-400;
            margin-bottom: spacing(2);
        }

        .btn {
            border-radius: $border-radius;
        }
    }
}
